I1028 09:50:53.192792    3156 serve.go:43] cloudcode_cli (Oct 13 2025 10:40:25 -0700, cl:818731710 baseline:818395572)
I1028 09:50:53.192856    3156 serve.go:44] Command line: ["/home/wavie3582/.cache/cloud-code/cloudcode_cli/cloudcode_cli/91e3044c/cloudcode_cli" "duet" "-trace" "-logtostderr"]
I1028 09:50:53.192897    3156 server.go:399] tracing on
I1028 09:50:53.193832    3156 conn_opt.go:55] jsonrpc2: --> request #0: initialize: {"processId":3035,"clientInfo":{"name":"Code OSS for Cloud Shell","version":"1.102.3-cde"},"locale":"en","rootPath":"/home/wavie3582","rootUri":"file:///home/wavie3582","capabilities":{"workspace":{"applyEdit":true,"workspaceEdit":{"documentChanges":true,"resourceOperations":["create","rename","delete"],"failureHandling":"textOnlyTransactional","normalizesLineEndings":true,"changeAnnotationSupport":{"groupsOnLabel":true}},"configuration":true,"didChangeWatchedFiles":{"dynamicRegistration":true,"relativePatternSupport":true},"symbol":{"dynamicRegistration":true,"symbolKind":{"valueSet":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26]},"tagSupport":{"valueSet":[1]},"resolveSupport":{"properties":["location.range"]}},"codeLens":{"refreshSupport":true},"executeCommand":{"dynamicRegistration":true},"didChangeConfiguration":{"dynamicRegistration":true},"workspaceFolders":true,"foldingRange":{"refreshSupport":true},"semanticTokens":{"refreshSupport":true},"fileOperations":{"dynamicRegistration":true,"didCreate":true,"didRename":true,"didDelete":true,"willCreate":true,"willRename":true,"willDelete":true},"inlineValue":{"refreshSupport":true},"inlayHint":{"refreshSupport":true},"diagnostics":{"refreshSupport":true}},"textDocument":{"publishDiagnostics":{"relatedInformation":true,"versionSupport":false,"tagSupport":{"valueSet":[1,2]},"codeDescriptionSupport":true,"dataSupport":true},"synchronization":{"dynamicRegistration":true,"willSave":true,"willSaveWaitUntil":true,"didSave":true},"completion":{"dynamicRegistration":true,"contextSupport":true,"completionItem":{"snippetSupport":true,"commitCharactersSupport":true,"documentationFormat":["markdown","plaintext"],"deprecatedSupport":true,"preselectSupport":true,"tagSupport":{"valueSet":[1]},"insertReplaceSupport":true,"resolveSupport":{"properties":["documentation","detail","additionalTextEdits"]},"insertTextModeSupport":{"valueSet":[1,2]},"labelDetailsSupport":true},"insertTextMode":2,"completionItemKind":{"valueSet":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25]},"completionList":{"itemDefaults":["commitCharacters","editRange","insertTextFormat","insertTextMode","data"]}},"hover":{"dynamicRegistration":true,"contentFormat":["markdown","plaintext"]},"signatureHelp":{"dynamicRegistration":true,"signatureInformation":{"documentationFormat":["markdown","plaintext"],"parameterInformation":{"labelOffsetSupport":true},"activeParameterSupport":true},"contextSupport":true},"definition":{"dynamicRegistration":true,"linkSupport":true},"references":{"dynamicRegistration":true},"documentHighlight":{"dynamicRegistration":true},"documentSymbol":{"dynamicRegistration":true,"symbolKind":{"valueSet":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26]},"hierarchicalDocumentSymbolSupport":true,"tagSupport":{"valueSet":[1]},"labelSupport":true},"codeAction":{"dynamicRegistration":true,"isPreferredSupport":true,"disabledSupport":true,"dataSupport":true,"resolveSupport":{"properties":["edit"]},"codeActionLiteralSupport":{"codeActionKind":{"valueSet":["","quickfix","refactor","refactor.extract","refactor.inline","refactor.rewrite","source","source.organizeImports"]}},"honorsChangeAnnotations":true},"codeLens":{"dynamicRegistration":true},"formatting":{"dynamicRegistration":true},"rangeFormatting":{"dynamicRegistration":true,"rangesSupport":true},"onTypeFormatting":{"dynamicRegistration":true},"rename":{"dynamicRegistration":true,"prepareSupport":true,"prepareSupportDefaultBehavior":1,"honorsChangeAnnotations":true},"documentLink":{"dynamicRegistration":true,"tooltipSupport":true},"typeDefinition":{"dynamicRegistration":true,"linkSupport":true},"implementation":{"dynamicRegistration":true,"linkSupport":true},"colorProvider":{"dynamicRegistration":true},"foldingRange":{"dynamicRegistration":true,"rangeLimit":5000,"lineFoldingOnly":true,"foldingRangeKind":{"valueSet":["comment","imports","region"]},"foldingRange":{"collapsedText":false}},"declaration":{"dynamicRegistration":true,"linkSupport":true},"selectionRange":{"dynamicRegistration":true},"callHierarchy":{"dynamicRegistration":true},"semanticTokens":{"dynamicRegistration":true,"tokenTypes":["namespace","type","class","enum","interface","struct","typeParameter","parameter","variable","property","enumMember","event","function","method","macro","keyword","modifier","comment","string","number","regexp","operator","decorator"],"tokenModifiers":["declaration","definition","readonly","static","deprecated","abstract","async","modification","documentation","defaultLibrary"],"formats":["relative"],"requests":{"range":true,"full":{"delta":true}},"multilineTokenSupport":false,"overlappingTokenSupport":false,"serverCancelSupport":true,"augmentsSyntaxTokens":true},"linkedEditingRange":{"dynamicRegistration":true},"typeHierarchy":{"dynamicRegistration":true},"inlineValue":{"dynamicRegistration":true},"inlayHint":{"dynamicRegistration":true,"resolveSupport":{"properties":["tooltip","textEdits","label.tooltip","label.location","label.command"]}},"diagnostic":{"dynamicRegistration":true,"relatedDocumentSupport":false}},"window":{"showMessage":{"messageActionItem":{"additionalPropertiesSupport":true}},"showDocument":{"support":true},"workDoneProgress":true},"general":{"staleRequestSupport":{"cancel":true,"retryOnContentModified":["textDocument/semanticTokens/full","textDocument/semanticTokens/range","textDocument/semanticTokens/full/delta"]},"regularExpressions":{"engine":"ECMAScript","version":"ES2020"},"markdown":{"parser":"marked","version":"1.1.0"},"positionEncodings":["utf-16"]},"notebookDocument":{"synchronization":{"dynamicRegistration":true,"executionSummarySupport":true}}},"initializationOptions":{"byoidContext":false,"lsSessionIndex":0,"ideType":"CLOUD_SHELL","ideVersion":"1.102.3-cde","platform":"LINUX_AMD64","pluginVersion":"2.54.0","updateChannel":"","pluginType":"CLOUD_CODE","ideName":"Code OSS for Cloud Shell"},"trace":"off","workspaceFolders":[{"uri":"file:///home/wavie3582","name":"wavie3582"}]}
I1028 09:50:53.195479    3156 life_cycle.go:203] Initializing. Architecture: "amd64", Operating system: "linux"
I1028 09:50:53.196037    3156 conn_opt.go:96] jsonrpc2: <-- result #0: initialize: {"capabilities":{"textDocumentSync":{"openClose":true,"change":2,"save":{"includeText":true}},"completionProvider":{},"hoverProvider":true,"signatureHelpProvider":{},"codeActionProvider":{"codeActionKinds":["quickfix"],"resolveProvider":true},"documentLinkProvider":{},"executeCommandProvider":{"commands":["_cloudcode.duetAI.ls.completionAccepted","_cloudcode.duetAI.ls.completionRejected","_cloudcode.duetAI.ls.cachedDocs","_cloudcode.duetAI.ls.updateIntellisenseCache","_cloudcode.duetAI.ls.overwriteLastEdit","_cloudcode.duetAI.ls.show"]},"workspace":{"workspaceFolders":{},"fileOperations":{"didRename":{"filters":[{"scheme":"file","pattern":{"glob":"**","matches":"file"}}]},"didDelete":{"filters":[{"scheme":"file","pattern":{"glob":"**","matches":"file"}}]}}}},"serverInfo":{"name":"Gemini","version":"2.54.0"}}
I1028 09:50:53.208173    3156 conn_opt.go:53] jsonrpc2: --> notif: initialized: {}
I1028 09:50:53.208513    3156 conn_opt.go:82] jsonrpc2: <-- request #0: client/registerCapability: {"registrations":[{"id":"workspace/didChangeConfiguration","method":"workspace/didChangeConfiguration"}]}
I1028 09:50:53.230913    3156 conn_opt.go:53] jsonrpc2: --> notif: textDocument/didOpen: {"textDocument":{"uri":"file:///home/wavie3582/package.json","languageId":"json","version":1,"text":"{\r\n  \"name\": \"pulsemotionhub-backend\",\r\n  \"version\": \"1.0.0\",\r\n  \"description\": \"Secure Node.js proxy for Gemini API on Google Cloud Run.\",\r\n  \"main\": \"app.js\",\r\n  \"type\": \"module\",\r\n  \"scripts\": {\r\n    \"start\": \"node app.js\"\r\n  },\r\n  \"dependencies\": {\r\n    \"@google/genai\": \"^0.15.0\",  \r\n    \"express\": \"^4.19.2\"\r\n  }\r\n}\r\n"}}
I1028 09:50:53.232155    3156 conn_opt.go:55] jsonrpc2: --> request #0: client/registerCapability: {"registrations":[{"id":"workspace/didChangeConfiguration","method":"workspace/didChangeConfiguration"}]}
I1028 09:50:53.232356    3156 conn_opt.go:82] jsonrpc2: <-- request #1: workspace/configuration: {"items":[{"section":"cloudcode.aiCompanion"}]}
I1028 09:50:53.233427    3156 conn_opt.go:55] jsonrpc2: --> request #1: workspace/configuration: {"items":[{"section":"cloudcode.aiCompanion"}]}
I1028 09:50:53.233519    3156 conn_opt.go:82] jsonrpc2: <-- request #2: workspace/configuration: {"items":[{"section":"cloudcode.duetAI"}]}
I1028 09:50:53.234290    3156 conn_opt.go:55] jsonrpc2: --> request #2: workspace/configuration: {"items":[{"section":"cloudcode.duetAI"}]}
I1028 09:50:53.234368    3156 conn_opt.go:82] jsonrpc2: <-- request #3: workspace/configuration: {"items":[{"section":"geminicodeassist"}]}
I1028 09:50:53.235215    3156 conn_opt.go:55] jsonrpc2: --> request #3: workspace/configuration: {"items":[{"section":"geminicodeassist"}]}
I1028 09:50:53.235362    3156 conn_opt.go:82] jsonrpc2: <-- request #4: workspace/configuration: {"items":[{"section":"cloudcode"}]}
I1028 09:50:53.236379    3156 conn_opt.go:55] jsonrpc2: --> request #4: workspace/configuration: {"items":[{"section":"cloudcode"}]}
I1028 09:50:53.236810    3156 configuration.go:214] product updateChannel will be used
I1028 09:50:53.236865    3156 configuration.go:822] language thresholds: map[]
I1028 09:50:53.236885    3156 configuration.go:760] dataFileExtensions array: [.csv .tsv .jsonl]
I1028 09:50:53.236901    3156 configuration.go:1033] atlas codeCompletion llm options: {MaxTokens:64 Temp:0.2 Samples:4 EnablePrompt:<nil> PromptOverride: PostProcess:0x2efab71bce95 StopSequences:map[] DataFilePromptLines:0}
I1028 09:50:53.236927    3156 configuration.go:1033] atlas codeGeneration llm options: {MaxTokens:512 Temp:0.2 Samples:4 EnablePrompt:<nil> PromptOverride: PostProcess:0x2efab71bceb5 StopSequences:map[*:[[eod] [EOF] [pre] [suf] [mid]]] DataFilePromptLines:5}
I1028 09:50:53.237041    3156 configuration.go:305] Configured settings for atlasOpts: {"Addr":"","QuotaProject":"","Project":"","LogPrompt":true,"UseTypeoverCache":true,"AdaptiveCacheEnabled":false,"AdaptingCacheMaxInflightRequests":0,"InfixCacheEnabled":false,"EnableAdminCitationBlock":false,"EnableAICATelemetryDebug":false,"EnableAICharactersTelemetry":false,"EnableAICharactersTelemetryCCPA":false,"EnableChatStreaming":false,"Complete":{"MaxTokens":64,"Temp":0.2,"Samples":4,"EnablePrompt":null,"PromptOverride":"","PostProcess":true,"StopSequences":null,"DataFilePromptLines":0},"Generate":{"MaxTokens":512,"Temp":0.2,"Samples":4,"EnablePrompt":null,"PromptOverride":"","PostProcess":true,"StopSequences":{"*":["[eod]","[EOF]","[pre]","[suf]","[mid]"]},"DataFilePromptLines":5},"DataFileExtensions":[".csv",".tsv",".jsonl"]}
I1028 09:50:53.237082    3156 configuration.go:313] Configured settings for cloudCodeOpts: {"Addr":"cloudcode-pa.googleapis.com:443","QuotaProject":"","Project":"","LogPrompt":true,"UseTypeoverCache":true,"AdaptiveCacheEnabled":false,"AdaptingCacheMaxInflightRequests":2,"InfixCacheEnabled":false,"EnableAdminCitationBlock":false,"EnableAICATelemetryDebug":false,"EnableAICharactersTelemetry":false,"EnableAICharactersTelemetryCCPA":false,"EnableChatStreaming":false}
I1028 09:50:53.237088    3156 configuration.go:317] Configured settings for opts: &{trace:true a2aAddr: staticAgentServerAddress:false atlasAddr:cloudaicompanion.googleapis.com:443 cloudCodeAddr:cloudcode-pa.googleapis.com:443 cloudCodeQuotaProject: ByoidContext:false autoGen:false invokeGen:true codeCacheMaxEntries:1024 completionOpts:{debounce:550000000 suggestionSpeed:Moderate throttle:100000000 debouncedAfterFetching:true flashCompletionsEnabled:false nextEditEnabled:false minScoreThreshold:0 languageThresholds:map[] enableThresholds:true commentCompletion:false citationLengthThreshold:-1 enableRecitations:true citationLogFilePath: repeatedStringFilterThreshold:60 otherFilesGenerationLimit:20 otherFilesGenerationSizeLimit:-1 otherFilesCompletionLimit:0 otherFilesCompletionSizeLimit:-1 multiQueryTailNSForCompletion:[] multiQueryTailNSForGeneration:[] enableSmartchoicesContextCollection:false enablePrefetching:false prefetchNextSuggestions:1 prefetchMinScoreThreshold:-9 prefetchTopSuggestions:2} contextExclusionFile:.aiexclude contextExclusionFileGitignore:true chatOpts:{contextOrdering:fsu maxFileBytes:75000 maxHistoryBytes:500000 escapeContext:false otherFilesLimit:20 otherFilesSizeLimit:-1 userSelectedFilesSizeLimit:-1} useRest:<nil> useCloudCodeAPI:true enableLocalAgent:false enableChatStreaming:false enableChatSuggestedPrompts:false enableNotebooks:false enableRAGL:false enableRAGLCompletion:false enableRAGLChat:false enableRAGLCompletionSnippets:false enableRAGLCompletionSnippetsWithPruning:false enableBM25ScoringForCompletionSnippets:false enableColocatedFilesForCompletionSnippets:false enableWorkspaceFilesForCompletionSnippets:false enableLanguageFilteringForCompletionSnippets:false languageFilteringIncludesAllFilesIfUnknown:false substringsToIdentifyTestPrompts:[test] substringsToIdentifyDocPrompts:[document comment] localCodebaseAwareness:true ragLOptions:{CoLocated:20 TokenizationAlgorithm:whitespace IncludeDocFiles:false IncludeUnitTestFiles:false MaxFileSearchDepth:1 WorkspaceFolders:[] RerankByLangBoost:0 TopKTestFilesToInclude:0 TopKDocFilesToInclude:0 EnableWaldFileSelection:false WaldMaxFileSearchDepth:0 EnableBM25InChat:false EnableLocalBM25ChatInputFromCursor:false BM25InChatFromCursorMaxResults:10 BM25InChatFromInputMaxResults:10 BM25IndexMaxsizeFiles:25000 ChatBM25TokenizationAlgorithm:wald_word3 BM25InCompletionEnabled:false BM25InCompletionMaxResults:15 NumTokensAroundTheCursorForBm25Query:8 NumTokensFromSelectionForBm25Query:1000 BM25FilterByLanguageFamilyInCompletion:false BM25FilterByLanguageFamilyInChat:false}}
I1028 09:50:53.237125    3156 configuration.go:319] Configured settings for canCancelRequests: true
I1028 09:50:53.237131    3156 configuration.go:321] Configured settings for contextPromptOpts: &{Endpoint:}
I1028 09:50:53.237150    3156 conn_opt.go:82] jsonrpc2: <-- request #5: workspace/configuration: {"items":[{"section":"geminicodeassist.verboseLogging"}]}
I1028 09:50:53.237864    3156 conn_opt.go:55] jsonrpc2: --> request #5: workspace/configuration: {"items":[{"section":"geminicodeassist.verboseLogging"}]}
I1028 09:50:58.590099    3156 conn_opt.go:53] jsonrpc2: --> notif: $/setTrace: {"value":"off"}
I1028 09:50:58.590179    3156 conn_opt.go:53] jsonrpc2: --> notif: workspace/didChangeConfiguration: {"settings":null}
I1028 09:50:58.590205    3156 conn_opt.go:53] jsonrpc2: --> notif: $/setTrace: {"value":"off"}
W1028 09:50:58.590214    3156 server.go:605] unknown method "$/setTrace"
I1028 09:50:58.590230    3156 conn_opt.go:53] jsonrpc2: --> notif: workspace/didChangeConfiguration: {"settings":null}
I1028 09:50:58.590337    3156 conn_opt.go:82] jsonrpc2: <-- request #6: workspace/configuration: {"items":[{"section":"cloudcode.aiCompanion"}]}
I1028 09:50:58.605011    3156 conn_opt.go:55] jsonrpc2: --> request #6: workspace/configuration: {"items":[{"section":"cloudcode.aiCompanion"}]}
I1028 09:50:58.605143    3156 conn_opt.go:82] jsonrpc2: <-- request #7: workspace/configuration: {"items":[{"section":"cloudcode.duetAI"}]}
I1028 09:50:58.618136    3156 conn_opt.go:55] jsonrpc2: --> request #7: workspace/configuration: {"items":[{"section":"cloudcode.duetAI"}]}
I1028 09:50:58.618258    3156 conn_opt.go:82] jsonrpc2: <-- request #8: workspace/configuration: {"items":[{"section":"geminicodeassist"}]}
I1028 09:50:58.620061    3156 conn_opt.go:55] jsonrpc2: --> request #8: workspace/configuration: {"items":[{"section":"geminicodeassist"}]}
I1028 09:50:58.620224    3156 conn_opt.go:82] jsonrpc2: <-- request #9: workspace/configuration: {"items":[{"section":"cloudcode"}]}
I1028 09:50:58.621614    3156 conn_opt.go:55] jsonrpc2: --> request #9: workspace/configuration: {"items":[{"section":"cloudcode"}]}
I1028 09:50:58.621802    3156 configuration.go:214] product updateChannel will be used
I1028 09:50:58.621866    3156 configuration.go:822] language thresholds: map[]
I1028 09:50:58.621882    3156 configuration.go:760] dataFileExtensions array: [.csv .tsv .jsonl]
I1028 09:50:58.621907    3156 configuration.go:1033] atlas codeCompletion llm options: {MaxTokens:64 Temp:0.2 Samples:4 EnablePrompt:<nil> PromptOverride: PostProcess:0x2efab71bdf45 StopSequences:map[] DataFilePromptLines:0}
I1028 09:50:58.621938    3156 configuration.go:1033] atlas codeGeneration llm options: {MaxTokens:512 Temp:0.2 Samples:4 EnablePrompt:<nil> PromptOverride: PostProcess:0x2efab71bdf65 StopSequences:map[*:[[eod] [EOF] [pre] [suf] [mid]]] DataFilePromptLines:5}
I1028 09:50:58.621975    3156 configuration.go:305] Configured settings for atlasOpts: {"Addr":"","QuotaProject":"","Project":"","LogPrompt":true,"UseTypeoverCache":true,"AdaptiveCacheEnabled":false,"AdaptingCacheMaxInflightRequests":0,"InfixCacheEnabled":false,"EnableAdminCitationBlock":false,"EnableAICATelemetryDebug":false,"EnableAICharactersTelemetry":false,"EnableAICharactersTelemetryCCPA":false,"EnableChatStreaming":false,"Complete":{"MaxTokens":64,"Temp":0.2,"Samples":4,"EnablePrompt":null,"PromptOverride":"","PostProcess":true,"StopSequences":null,"DataFilePromptLines":0},"Generate":{"MaxTokens":512,"Temp":0.2,"Samples":4,"EnablePrompt":null,"PromptOverride":"","PostProcess":true,"StopSequences":{"*":["[eod]","[EOF]","[pre]","[suf]","[mid]"]},"DataFilePromptLines":5},"DataFileExtensions":[".csv",".tsv",".jsonl"]}
I1028 09:50:58.621991    3156 configuration.go:313] Configured settings for cloudCodeOpts: {"Addr":"cloudcode-pa.googleapis.com:443","QuotaProject":"","Project":"","LogPrompt":true,"UseTypeoverCache":true,"AdaptiveCacheEnabled":false,"AdaptingCacheMaxInflightRequests":2,"InfixCacheEnabled":false,"EnableAdminCitationBlock":false,"EnableAICATelemetryDebug":false,"EnableAICharactersTelemetry":false,"EnableAICharactersTelemetryCCPA":false,"EnableChatStreaming":false}
I1028 09:50:58.622011    3156 configuration.go:317] Configured settings for opts: &{trace:true a2aAddr: staticAgentServerAddress:false atlasAddr:cloudaicompanion.googleapis.com:443 cloudCodeAddr:cloudcode-pa.googleapis.com:443 cloudCodeQuotaProject: ByoidContext:false autoGen:false invokeGen:true codeCacheMaxEntries:1024 completionOpts:{debounce:550000000 suggestionSpeed:Moderate throttle:100000000 debouncedAfterFetching:true flashCompletionsEnabled:false nextEditEnabled:false minScoreThreshold:0 languageThresholds:map[] enableThresholds:true commentCompletion:false citationLengthThreshold:-1 enableRecitations:true citationLogFilePath: repeatedStringFilterThreshold:60 otherFilesGenerationLimit:20 otherFilesGenerationSizeLimit:-1 otherFilesCompletionLimit:0 otherFilesCompletionSizeLimit:-1 multiQueryTailNSForCompletion:[] multiQueryTailNSForGeneration:[] enableSmartchoicesContextCollection:false enablePrefetching:false prefetchNextSuggestions:1 prefetchMinScoreThreshold:-9 prefetchTopSuggestions:2} contextExclusionFile:.aiexclude contextExclusionFileGitignore:true chatOpts:{contextOrdering:fsu maxFileBytes:75000 maxHistoryBytes:500000 escapeContext:false otherFilesLimit:20 otherFilesSizeLimit:-1 userSelectedFilesSizeLimit:-1} useRest:<nil> useCloudCodeAPI:true enableLocalAgent:false enableChatStreaming:false enableChatSuggestedPrompts:false enableNotebooks:false enableRAGL:false enableRAGLCompletion:false enableRAGLChat:false enableRAGLCompletionSnippets:false enableRAGLCompletionSnippetsWithPruning:false enableBM25ScoringForCompletionSnippets:false enableColocatedFilesForCompletionSnippets:false enableWorkspaceFilesForCompletionSnippets:false enableLanguageFilteringForCompletionSnippets:false languageFilteringIncludesAllFilesIfUnknown:false substringsToIdentifyTestPrompts:[test] substringsToIdentifyDocPrompts:[document comment] localCodebaseAwareness:true ragLOptions:{CoLocated:20 TokenizationAlgorithm:whitespace IncludeDocFiles:false IncludeUnitTestFiles:false MaxFileSearchDepth:1 WorkspaceFolders:[] RerankByLangBoost:0 TopKTestFilesToInclude:0 TopKDocFilesToInclude:0 EnableWaldFileSelection:false WaldMaxFileSearchDepth:0 EnableBM25InChat:false EnableLocalBM25ChatInputFromCursor:false BM25InChatFromCursorMaxResults:10 BM25InChatFromInputMaxResults:10 BM25IndexMaxsizeFiles:25000 ChatBM25TokenizationAlgorithm:wald_word3 BM25InCompletionEnabled:false BM25InCompletionMaxResults:15 NumTokensAroundTheCursorForBm25Query:8 NumTokensFromSelectionForBm25Query:1000 BM25FilterByLanguageFamilyInCompletion:false BM25FilterByLanguageFamilyInChat:false}}
I1028 09:50:58.622070    3156 configuration.go:319] Configured settings for canCancelRequests: true
I1028 09:50:58.622079    3156 configuration.go:321] Configured settings for contextPromptOpts: &{Endpoint:}
I1028 09:50:58.622103    3156 conn_opt.go:82] jsonrpc2: <-- request #10: workspace/configuration: {"items":[{"section":"geminicodeassist.verboseLogging"}]}
I1028 09:50:58.622795    3156 conn_opt.go:55] jsonrpc2: --> request #10: workspace/configuration: {"items":[{"section":"geminicodeassist.verboseLogging"}]}
W1028 09:50:58.622884    3156 server.go:605] unknown method "$/setTrace"
I1028 09:50:58.622913    3156 conn_opt.go:82] jsonrpc2: <-- request #11: workspace/configuration: {"items":[{"section":"cloudcode.aiCompanion"}]}
I1028 09:50:58.623480    3156 conn_opt.go:55] jsonrpc2: --> request #11: workspace/configuration: {"items":[{"section":"cloudcode.aiCompanion"}]}
I1028 09:50:58.623544    3156 conn_opt.go:82] jsonrpc2: <-- request #12: workspace/configuration: {"items":[{"section":"cloudcode.duetAI"}]}
I1028 09:50:58.624178    3156 conn_opt.go:55] jsonrpc2: --> request #12: workspace/configuration: {"items":[{"section":"cloudcode.duetAI"}]}
I1028 09:50:58.624252    3156 conn_opt.go:82] jsonrpc2: <-- request #13: workspace/configuration: {"items":[{"section":"geminicodeassist"}]}
I1028 09:50:58.625217    3156 conn_opt.go:55] jsonrpc2: --> request #13: workspace/configuration: {"items":[{"section":"geminicodeassist"}]}
I1028 09:50:58.625327    3156 conn_opt.go:82] jsonrpc2: <-- request #14: workspace/configuration: {"items":[{"section":"cloudcode"}]}
I1028 09:50:58.626433    3156 conn_opt.go:55] jsonrpc2: --> request #14: workspace/configuration: {"items":[{"section":"cloudcode"}]}
I1028 09:50:58.626564    3156 configuration.go:214] product updateChannel will be used
I1028 09:50:58.626610    3156 configuration.go:822] language thresholds: map[]
I1028 09:50:58.626622    3156 configuration.go:760] dataFileExtensions array: [.csv .tsv .jsonl]
I1028 09:50:58.626637    3156 configuration.go:1033] atlas codeCompletion llm options: {MaxTokens:64 Temp:0.2 Samples:4 EnablePrompt:<nil> PromptOverride: PostProcess:0x2efab71dc715 StopSequences:map[] DataFilePromptLines:0}
I1028 09:50:58.626661    3156 configuration.go:1033] atlas codeGeneration llm options: {MaxTokens:512 Temp:0.2 Samples:4 EnablePrompt:<nil> PromptOverride: PostProcess:0x2efab71dc735 StopSequences:map[*:[[eod] [EOF] [pre] [suf] [mid]]] DataFilePromptLines:5}
I1028 09:50:58.626705    3156 configuration.go:305] Configured settings for atlasOpts: {"Addr":"","QuotaProject":"","Project":"","LogPrompt":true,"UseTypeoverCache":true,"AdaptiveCacheEnabled":false,"AdaptingCacheMaxInflightRequests":0,"InfixCacheEnabled":false,"EnableAdminCitationBlock":false,"EnableAICATelemetryDebug":false,"EnableAICharactersTelemetry":false,"EnableAICharactersTelemetryCCPA":false,"EnableChatStreaming":false,"Complete":{"MaxTokens":64,"Temp":0.2,"Samples":4,"EnablePrompt":null,"PromptOverride":"","PostProcess":true,"StopSequences":null,"DataFilePromptLines":0},"Generate":{"MaxTokens":512,"Temp":0.2,"Samples":4,"EnablePrompt":null,"PromptOverride":"","PostProcess":true,"StopSequences":{"*":["[eod]","[EOF]","[pre]","[suf]","[mid]"]},"DataFilePromptLines":5},"DataFileExtensions":[".csv",".tsv",".jsonl"]}
I1028 09:50:58.626722    3156 configuration.go:313] Configured settings for cloudCodeOpts: {"Addr":"cloudcode-pa.googleapis.com:443","QuotaProject":"","Project":"","LogPrompt":true,"UseTypeoverCache":true,"AdaptiveCacheEnabled":false,"AdaptingCacheMaxInflightRequests":2,"InfixCacheEnabled":false,"EnableAdminCitationBlock":false,"EnableAICATelemetryDebug":false,"EnableAICharactersTelemetry":false,"EnableAICharactersTelemetryCCPA":false,"EnableChatStreaming":false}
I1028 09:50:58.626731    3156 configuration.go:317] Configured settings for opts: &{trace:true a2aAddr: staticAgentServerAddress:false atlasAddr:cloudaicompanion.googleapis.com:443 cloudCodeAddr:cloudcode-pa.googleapis.com:443 cloudCodeQuotaProject: ByoidContext:false autoGen:false invokeGen:true codeCacheMaxEntries:1024 completionOpts:{debounce:550000000 suggestionSpeed:Moderate throttle:100000000 debouncedAfterFetching:true flashCompletionsEnabled:false nextEditEnabled:false minScoreThreshold:0 languageThresholds:map[] enableThresholds:true commentCompletion:false citationLengthThreshold:-1 enableRecitations:true citationLogFilePath: repeatedStringFilterThreshold:60 otherFilesGenerationLimit:20 otherFilesGenerationSizeLimit:-1 otherFilesCompletionLimit:0 otherFilesCompletionSizeLimit:-1 multiQueryTailNSForCompletion:[] multiQueryTailNSForGeneration:[] enableSmartchoicesContextCollection:false enablePrefetching:false prefetchNextSuggestions:1 prefetchMinScoreThreshold:-9 prefetchTopSuggestions:2} contextExclusionFile:.aiexclude contextExclusionFileGitignore:true chatOpts:{contextOrdering:fsu maxFileBytes:75000 maxHistoryBytes:500000 escapeContext:false otherFilesLimit:20 otherFilesSizeLimit:-1 userSelectedFilesSizeLimit:-1} useRest:<nil> useCloudCodeAPI:true enableLocalAgent:false enableChatStreaming:false enableChatSuggestedPrompts:false enableNotebooks:false enableRAGL:false enableRAGLCompletion:false enableRAGLChat:false enableRAGLCompletionSnippets:false enableRAGLCompletionSnippetsWithPruning:false enableBM25ScoringForCompletionSnippets:false enableColocatedFilesForCompletionSnippets:false enableWorkspaceFilesForCompletionSnippets:false enableLanguageFilteringForCompletionSnippets:false languageFilteringIncludesAllFilesIfUnknown:false substringsToIdentifyTestPrompts:[test] substringsToIdentifyDocPrompts:[document comment] localCodebaseAwareness:true ragLOptions:{CoLocated:20 TokenizationAlgorithm:whitespace IncludeDocFiles:false IncludeUnitTestFiles:false MaxFileSearchDepth:1 WorkspaceFolders:[] RerankByLangBoost:0 TopKTestFilesToInclude:0 TopKDocFilesToInclude:0 EnableWaldFileSelection:false WaldMaxFileSearchDepth:0 EnableBM25InChat:false EnableLocalBM25ChatInputFromCursor:false BM25InChatFromCursorMaxResults:10 BM25InChatFromInputMaxResults:10 BM25IndexMaxsizeFiles:25000 ChatBM25TokenizationAlgorithm:wald_word3 BM25InCompletionEnabled:false BM25InCompletionMaxResults:15 NumTokensAroundTheCursorForBm25Query:8 NumTokensFromSelectionForBm25Query:1000 BM25FilterByLanguageFamilyInCompletion:false BM25FilterByLanguageFamilyInChat:false}}
I1028 09:50:58.626771    3156 configuration.go:319] Configured settings for canCancelRequests: true
I1028 09:50:58.626780    3156 configuration.go:321] Configured settings for contextPromptOpts: &{Endpoint:}
I1028 09:50:58.626817    3156 conn_opt.go:82] jsonrpc2: <-- request #15: workspace/configuration: {"items":[{"section":"geminicodeassist.verboseLogging"}]}
I1028 09:50:58.627428    3156 conn_opt.go:55] jsonrpc2: --> request #15: workspace/configuration: {"items":[{"section":"geminicodeassist.verboseLogging"}]}
I1028 09:51:41.849236    3156 conn_opt.go:53] jsonrpc2: --> notif: $/setTrace: {"value":"off"}
I1028 09:51:41.849328    3156 conn_opt.go:53] jsonrpc2: --> notif: workspace/didChangeConfiguration: {"settings":null}
W1028 09:51:41.849472    3156 server.go:605] unknown method "$/setTrace"
I1028 09:51:41.849575    3156 conn_opt.go:82] jsonrpc2: <-- request #16: workspace/configuration: {"items":[{"section":"cloudcode.aiCompanion"}]}
I1028 09:51:41.863358    3156 conn_opt.go:55] jsonrpc2: --> request #16: workspace/configuration: {"items":[{"section":"cloudcode.aiCompanion"}]}
I1028 09:51:41.863492    3156 conn_opt.go:82] jsonrpc2: <-- request #17: workspace/configuration: {"items":[{"section":"cloudcode.duetAI"}]}
I1028 09:51:41.864227    3156 conn_opt.go:55] jsonrpc2: --> request #17: workspace/configuration: {"items":[{"section":"cloudcode.duetAI"}]}
I1028 09:51:41.864332    3156 conn_opt.go:82] jsonrpc2: <-- request #18: workspace/configuration: {"items":[{"section":"geminicodeassist"}]}
I1028 09:51:41.865269    3156 conn_opt.go:55] jsonrpc2: --> request #18: workspace/configuration: {"items":[{"section":"geminicodeassist"}]}
I1028 09:51:41.865422    3156 conn_opt.go:82] jsonrpc2: <-- request #19: workspace/configuration: {"items":[{"section":"cloudcode"}]}
I1028 09:51:41.866523    3156 conn_opt.go:55] jsonrpc2: --> request #19: workspace/configuration: {"items":[{"section":"cloudcode"}]}
I1028 09:51:41.866725    3156 configuration.go:214] product updateChannel will be used
I1028 09:51:41.866808    3156 configuration.go:822] language thresholds: map[]
I1028 09:51:41.866832    3156 configuration.go:760] dataFileExtensions array: [.csv .tsv .jsonl]
I1028 09:51:41.866857    3156 configuration.go:1033] atlas codeCompletion llm options: {MaxTokens:64 Temp:0.2 Samples:4 EnablePrompt:<nil> PromptOverride: PostProcess:0x2efab713be55 StopSequences:map[] DataFilePromptLines:0}
I1028 09:51:41.866897    3156 configuration.go:1033] atlas codeGeneration llm options: {MaxTokens:512 Temp:0.2 Samples:4 EnablePrompt:<nil> PromptOverride: PostProcess:0x2efab713be75 StopSequences:map[*:[[eod] [EOF] [pre] [suf] [mid]]] DataFilePromptLines:5}
I1028 09:51:41.866950    3156 configuration.go:305] Configured settings for atlasOpts: {"Addr":"","QuotaProject":"","Project":"","LogPrompt":true,"UseTypeoverCache":true,"AdaptiveCacheEnabled":false,"AdaptingCacheMaxInflightRequests":0,"InfixCacheEnabled":false,"EnableAdminCitationBlock":false,"EnableAICATelemetryDebug":false,"EnableAICharactersTelemetry":false,"EnableAICharactersTelemetryCCPA":false,"EnableChatStreaming":false,"Complete":{"MaxTokens":64,"Temp":0.2,"Samples":4,"EnablePrompt":null,"PromptOverride":"","PostProcess":true,"StopSequences":null,"DataFilePromptLines":0},"Generate":{"MaxTokens":512,"Temp":0.2,"Samples":4,"EnablePrompt":null,"PromptOverride":"","PostProcess":true,"StopSequences":{"*":["[eod]","[EOF]","[pre]","[suf]","[mid]"]},"DataFilePromptLines":5},"DataFileExtensions":[".csv",".tsv",".jsonl"]}
I1028 09:51:41.866982    3156 configuration.go:313] Configured settings for cloudCodeOpts: {"Addr":"cloudcode-pa.googleapis.com:443","QuotaProject":"","Project":"","LogPrompt":true,"UseTypeoverCache":true,"AdaptiveCacheEnabled":false,"AdaptingCacheMaxInflightRequests":2,"InfixCacheEnabled":false,"EnableAdminCitationBlock":false,"EnableAICATelemetryDebug":false,"EnableAICharactersTelemetry":false,"EnableAICharactersTelemetryCCPA":false,"EnableChatStreaming":false}
I1028 09:51:41.866991    3156 configuration.go:317] Configured settings for opts: &{trace:true a2aAddr: staticAgentServerAddress:false atlasAddr:cloudaicompanion.googleapis.com:443 cloudCodeAddr:cloudcode-pa.googleapis.com:443 cloudCodeQuotaProject: ByoidContext:false autoGen:false invokeGen:true codeCacheMaxEntries:1024 completionOpts:{debounce:550000000 suggestionSpeed:Moderate throttle:100000000 debouncedAfterFetching:true flashCompletionsEnabled:false nextEditEnabled:false minScoreThreshold:0 languageThresholds:map[] enableThresholds:true commentCompletion:false citationLengthThreshold:-1 enableRecitations:true citationLogFilePath: repeatedStringFilterThreshold:60 otherFilesGenerationLimit:20 otherFilesGenerationSizeLimit:-1 otherFilesCompletionLimit:0 otherFilesCompletionSizeLimit:-1 multiQueryTailNSForCompletion:[] multiQueryTailNSForGeneration:[] enableSmartchoicesContextCollection:false enablePrefetching:false prefetchNextSuggestions:1 prefetchMinScoreThreshold:-9 prefetchTopSuggestions:2} contextExclusionFile:.aiexclude contextExclusionFileGitignore:true chatOpts:{contextOrdering:fsu maxFileBytes:75000 maxHistoryBytes:500000 escapeContext:false otherFilesLimit:20 otherFilesSizeLimit:-1 userSelectedFilesSizeLimit:-1} useRest:<nil> useCloudCodeAPI:true enableLocalAgent:false enableChatStreaming:false enableChatSuggestedPrompts:false enableNotebooks:false enableRAGL:false enableRAGLCompletion:false enableRAGLChat:false enableRAGLCompletionSnippets:false enableRAGLCompletionSnippetsWithPruning:false enableBM25ScoringForCompletionSnippets:false enableColocatedFilesForCompletionSnippets:false enableWorkspaceFilesForCompletionSnippets:false enableLanguageFilteringForCompletionSnippets:false languageFilteringIncludesAllFilesIfUnknown:false substringsToIdentifyTestPrompts:[test] substringsToIdentifyDocPrompts:[document comment] localCodebaseAwareness:true ragLOptions:{CoLocated:20 TokenizationAlgorithm:whitespace IncludeDocFiles:false IncludeUnitTestFiles:false MaxFileSearchDepth:1 WorkspaceFolders:[] RerankByLangBoost:0 TopKTestFilesToInclude:0 TopKDocFilesToInclude:0 EnableWaldFileSelection:false WaldMaxFileSearchDepth:0 EnableBM25InChat:false EnableLocalBM25ChatInputFromCursor:false BM25InChatFromCursorMaxResults:10 BM25InChatFromInputMaxResults:10 BM25IndexMaxsizeFiles:25000 ChatBM25TokenizationAlgorithm:wald_word3 BM25InCompletionEnabled:false BM25InCompletionMaxResults:15 NumTokensAroundTheCursorForBm25Query:8 NumTokensFromSelectionForBm25Query:1000 BM25FilterByLanguageFamilyInCompletion:false BM25FilterByLanguageFamilyInChat:false}}
I1028 09:51:41.867058    3156 configuration.go:319] Configured settings for canCancelRequests: true
I1028 09:51:41.867068    3156 configuration.go:321] Configured settings for contextPromptOpts: &{Endpoint:}
I1028 09:51:41.867096    3156 conn_opt.go:82] jsonrpc2: <-- request #20: workspace/configuration: {"items":[{"section":"geminicodeassist.verboseLogging"}]}
I1028 09:51:41.867828    3156 conn_opt.go:55] jsonrpc2: --> request #20: workspace/configuration: {"items":[{"section":"geminicodeassist.verboseLogging"}]}
I1028 09:51:51.601168    3156 conn_opt.go:53] jsonrpc2: --> notif: $/setTrace: {"value":"off"}
I1028 09:51:51.601232    3156 conn_opt.go:53] jsonrpc2: --> notif: workspace/didChangeConfiguration: {"settings":null}
W1028 09:51:51.601270    3156 server.go:605] unknown method "$/setTrace"
I1028 09:51:51.601342    3156 conn_opt.go:82] jsonrpc2: <-- request #21: workspace/configuration: {"items":[{"section":"cloudcode.aiCompanion"}]}
I1028 09:51:51.615099    3156 conn_opt.go:55] jsonrpc2: --> request #21: workspace/configuration: {"items":[{"section":"cloudcode.aiCompanion"}]}
I1028 09:51:51.615315    3156 conn_opt.go:82] jsonrpc2: <-- request #22: workspace/configuration: {"items":[{"section":"cloudcode.duetAI"}]}
I1028 09:51:51.615932    3156 conn_opt.go:55] jsonrpc2: --> request #22: workspace/configuration: {"items":[{"section":"cloudcode.duetAI"}]}
I1028 09:51:51.616011    3156 conn_opt.go:82] jsonrpc2: <-- request #23: workspace/configuration: {"items":[{"section":"geminicodeassist"}]}
I1028 09:51:51.617018    3156 conn_opt.go:55] jsonrpc2: --> request #23: workspace/configuration: {"items":[{"section":"geminicodeassist"}]}
I1028 09:51:51.617172    3156 conn_opt.go:82] jsonrpc2: <-- request #24: workspace/configuration: {"items":[{"section":"cloudcode"}]}
I1028 09:51:51.618261    3156 conn_opt.go:55] jsonrpc2: --> request #24: workspace/configuration: {"items":[{"section":"cloudcode"}]}
I1028 09:51:51.618410    3156 configuration.go:214] product updateChannel will be used
I1028 09:51:51.618482    3156 configuration.go:822] language thresholds: map[]
I1028 09:51:51.618517    3156 configuration.go:760] dataFileExtensions array: [.csv .tsv .jsonl]
I1028 09:51:51.618541    3156 configuration.go:1033] atlas codeCompletion llm options: {MaxTokens:64 Temp:0.2 Samples:4 EnablePrompt:<nil> PromptOverride: PostProcess:0x2efab692adb5 StopSequences:map[] DataFilePromptLines:0}
I1028 09:51:51.618588    3156 configuration.go:1033] atlas codeGeneration llm options: {MaxTokens:512 Temp:0.2 Samples:4 EnablePrompt:<nil> PromptOverride: PostProcess:0x2efab692add5 StopSequences:map[*:[[eod] [EOF] [pre] [suf] [mid]]] DataFilePromptLines:5}
I1028 09:51:51.618646    3156 configuration.go:305] Configured settings for atlasOpts: {"Addr":"","QuotaProject":"","Project":"","LogPrompt":true,"UseTypeoverCache":true,"AdaptiveCacheEnabled":false,"AdaptingCacheMaxInflightRequests":0,"InfixCacheEnabled":false,"EnableAdminCitationBlock":false,"EnableAICATelemetryDebug":false,"EnableAICharactersTelemetry":false,"EnableAICharactersTelemetryCCPA":false,"EnableChatStreaming":false,"Complete":{"MaxTokens":64,"Temp":0.2,"Samples":4,"EnablePrompt":null,"PromptOverride":"","PostProcess":true,"StopSequences":null,"DataFilePromptLines":0},"Generate":{"MaxTokens":512,"Temp":0.2,"Samples":4,"EnablePrompt":null,"PromptOverride":"","PostProcess":true,"StopSequences":{"*":["[eod]","[EOF]","[pre]","[suf]","[mid]"]},"DataFilePromptLines":5},"DataFileExtensions":[".csv",".tsv",".jsonl"]}
I1028 09:51:51.618664    3156 configuration.go:313] Configured settings for cloudCodeOpts: {"Addr":"cloudcode-pa.googleapis.com:443","QuotaProject":"","Project":"","LogPrompt":true,"UseTypeoverCache":true,"AdaptiveCacheEnabled":false,"AdaptingCacheMaxInflightRequests":2,"InfixCacheEnabled":false,"EnableAdminCitationBlock":false,"EnableAICATelemetryDebug":false,"EnableAICharactersTelemetry":false,"EnableAICharactersTelemetryCCPA":false,"EnableChatStreaming":false}
I1028 09:51:51.618676    3156 configuration.go:317] Configured settings for opts: &{trace:true a2aAddr: staticAgentServerAddress:false atlasAddr:cloudaicompanion.googleapis.com:443 cloudCodeAddr:cloudcode-pa.googleapis.com:443 cloudCodeQuotaProject: ByoidContext:false autoGen:false invokeGen:true codeCacheMaxEntries:1024 completionOpts:{debounce:550000000 suggestionSpeed:Moderate throttle:100000000 debouncedAfterFetching:true flashCompletionsEnabled:false nextEditEnabled:false minScoreThreshold:0 languageThresholds:map[] enableThresholds:true commentCompletion:false citationLengthThreshold:-1 enableRecitations:true citationLogFilePath: repeatedStringFilterThreshold:60 otherFilesGenerationLimit:20 otherFilesGenerationSizeLimit:-1 otherFilesCompletionLimit:0 otherFilesCompletionSizeLimit:-1 multiQueryTailNSForCompletion:[] multiQueryTailNSForGeneration:[] enableSmartchoicesContextCollection:false enablePrefetching:false prefetchNextSuggestions:1 prefetchMinScoreThreshold:-9 prefetchTopSuggestions:2} contextExclusionFile:.aiexclude contextExclusionFileGitignore:true chatOpts:{contextOrdering:fsu maxFileBytes:75000 maxHistoryBytes:500000 escapeContext:false otherFilesLimit:20 otherFilesSizeLimit:-1 userSelectedFilesSizeLimit:-1} useRest:<nil> useCloudCodeAPI:true enableLocalAgent:false enableChatStreaming:false enableChatSuggestedPrompts:false enableNotebooks:false enableRAGL:false enableRAGLCompletion:false enableRAGLChat:false enableRAGLCompletionSnippets:false enableRAGLCompletionSnippetsWithPruning:false enableBM25ScoringForCompletionSnippets:false enableColocatedFilesForCompletionSnippets:false enableWorkspaceFilesForCompletionSnippets:false enableLanguageFilteringForCompletionSnippets:false languageFilteringIncludesAllFilesIfUnknown:false substringsToIdentifyTestPrompts:[test] substringsToIdentifyDocPrompts:[document comment] localCodebaseAwareness:true ragLOptions:{CoLocated:20 TokenizationAlgorithm:whitespace IncludeDocFiles:false IncludeUnitTestFiles:false MaxFileSearchDepth:1 WorkspaceFolders:[] RerankByLangBoost:0 TopKTestFilesToInclude:0 TopKDocFilesToInclude:0 EnableWaldFileSelection:false WaldMaxFileSearchDepth:0 EnableBM25InChat:false EnableLocalBM25ChatInputFromCursor:false BM25InChatFromCursorMaxResults:10 BM25InChatFromInputMaxResults:10 BM25IndexMaxsizeFiles:25000 ChatBM25TokenizationAlgorithm:wald_word3 BM25InCompletionEnabled:false BM25InCompletionMaxResults:15 NumTokensAroundTheCursorForBm25Query:8 NumTokensFromSelectionForBm25Query:1000 BM25FilterByLanguageFamilyInCompletion:false BM25FilterByLanguageFamilyInChat:false}}
I1028 09:51:51.618759    3156 configuration.go:319] Configured settings for canCancelRequests: true
I1028 09:51:51.618770    3156 configuration.go:321] Configured settings for contextPromptOpts: &{Endpoint:}
I1028 09:51:51.618799    3156 conn_opt.go:82] jsonrpc2: <-- request #25: workspace/configuration: {"items":[{"section":"geminicodeassist.verboseLogging"}]}
I1028 09:51:51.619416    3156 conn_opt.go:55] jsonrpc2: --> request #25: workspace/configuration: {"items":[{"section":"geminicodeassist.verboseLogging"}]}
I1028 09:53:46.810418    3156 conn_opt.go:53] jsonrpc2: --> notif: textDocument/didClose: {"textDocument":{"uri":"file:///home/wavie3582/package.json"}}
I1028 09:54:35.283466    3156 conn_opt.go:53] jsonrpc2: --> notif: textDocument/didOpen: {"textDocument":{"uri":"file:///home/wavie3582/app.js","languageId":"javascript","version":1,"text":"// Node.js Backend Proxy for PulseMotionHub\r\n// Runs securely on Google Cloud Run.\r\n// Handles API key and communicates with Gemini API.\r\n\r\nimport express from 'express';\r\nimport { GoogleGenAI } from '@google/genai';\r\nimport path from 'path';\r\nimport { fileURLToPath } from 'url';\r\n\r\n// --- CONFIGURATION ---\r\nconst app = express();\r\nconst PORT = process.env.PORT || 8080;\r\n\r\n// Get the directory name of the current module file\r\nconst __filename = fileURLToPath(import.meta.url);\r\nconst __dirname = path.dirname(__filename);\r\n\r\n// The API key is loaded from the Cloud Run environment variable.\r\nconst GEMINI_API_KEY = process.env.GEMINI_API_KEY;\r\n\r\nif (!GEMINI_API_KEY) {\r\n    console.error(\"CRITICAL ERROR: GEMINI_API_KEY environment variable is not set.\");\r\n    process.exit(1);\r\n}\r\n\r\n// Initialize the Gemini AI client\r\nconst ai = new GoogleGenAI({ apiKey: GEMINI_API_KEY });\r\nconst MODEL_NAME = 'gemini-2.5-flash';\r\n\r\n// --- MIDDLEWARE ---\r\n\r\n// Serve static files from the 'public' directory\r\napp.use(express.static(path.join(__dirname, 'public')));\r\n\r\n// Parse JSON request bodies\r\napp.use(express.json({ limit: '5mb' })); // Increased limit to handle large image Base64 strings\r\n\r\n// Logging middleware\r\napp.use((req, res, next) =\u003e {\r\n    console.log(`[${new Date().toISOString()}] ${req.method} ${req.url}`);\r\n    next();\r\n});\r\n\r\n// --- UTILITIES ---\r\n\r\n/**\r\n * Converts a Base64 string and MIME type into a Part object for the Gemini API.\r\n * @param {string} base64Data - The base64 encoded image data.\r\n * @param {string} mimeType - The MIME type of the image (e.g., 'image/jpeg').\r\n * @returns {object} A Part object for the Gemini API.\r\n */\r\nfunction base64ToGenerativePart(base64Data, mimeType) {\r\n    if (!base64Data || !mimeType) {\r\n        return null;\r\n    }\r\n    return {\r\n        inlineData: {\r\n            data: base64Data,\r\n            mimeType,\r\n        },\r\n    };\r\n}\r\n\r\n// --- API ROUTES ---\r\n\r\n/**\r\n * POST /api/generate-script\r\n * Handles the multimodal request to generate a cinematic script from an image and text prompt.\r\n */\r\napp.post('/api/generate-script', async (req, res) =\u003e {\r\n    try {\r\n        const { prompt, image, mimeType, userId } = req.body;\r\n\r\n        // 1. Input Validation\r\n        if (!prompt || !image || !mimeType) {\r\n            return res.status(400).json({ error: 'Missing prompt, image data, or MIME type.' });\r\n        }\r\n        if (!userId) {\r\n            return res.status(401).json({ error: 'User ID is missing. Authentication failed.' });\r\n        }\r\n\r\n        // 2. Multimodal Content Preparation\r\n        const imagePart = base64ToGenerativePart(image, mimeType);\r\n\r\n        // System Instruction to guide the AI's persona and output quality\r\n        const systemInstruction = `You are PulseMotion, a world-class cinematic AI specializing in generating detailed, 5-second video scripts. Based on the provided image and motion prompt, write a concise, hyper-realistic description of the camera movement, lighting, and mood. Your response MUST only contain the generated script text, formatted for clarity.`;\r\n\r\n        const userPrompt = `Analyze this image and apply the following motion and style instructions: \"${prompt}\". Generate a single, descriptive 5-second cinematic script.`;\r\n\r\n        const contents = [\r\n            imagePart,\r\n            { text: userPrompt }\r\n        ];\r\n\r\n        // 3. API Call to Gemini\r\n        const response = await ai.models.generateContent({\r\n            model: MODEL_NAME,\r\n            contents: contents,\r\n            config: {\r\n                systemInstruction: systemInstruction,\r\n                temperature: 0.9, // Higher temperature for creative output\r\n                maxOutputTokens: 500,\r\n            }\r\n        });\r\n\r\n        const generatedText = response.candidates?.[0]?.content?.parts?.[0]?.text;\r\n\r\n        if (generatedText) {\r\n            console.log(`Script generated successfully for User: ${userId}`);\r\n            // 4. Success Response\r\n            return res.status(200).json({ script: generatedText });\r\n        } else {\r\n            console.error(`AI returned empty response for User: ${userId}`);\r\n            // 5. Failure Response\r\n            return res.status(500).json({ error: 'AI generated an empty response or was blocked.' });\r\n        }\r\n\r\n    } catch (error) {\r\n        console.error('Gemini API/Server Error:', error);\r\n        // Catch network errors, API quota errors, etc.\r\n        return res.status(500).json({ error: 'Internal Server Error during AI processing.' });\r\n    }\r\n});\r\n\r\n// --- SERVER STARTUP ---\r\n\r\n// Catch-all for undefined routes, serving the frontend (index.html is handled by express.static)\r\napp.get('*', (req, res) =\u003e {\r\n    if (!req.path.startsWith('/api')) {\r\n        res.sendFile(path.join(__dirname, 'public', 'index.html'));\r\n    } else {\r\n        res.status(404).json({ error: 'API endpoint not found.' });\r\n    }\r\n});\r\n\r\napp.listen(PORT, () =\u003e {\r\n    console.log(`PulseMotionHub Backend listening on port ${PORT}`);\r\n    console.log(`Serving static files from ${path.join(__dirname, 'public')}`);\r\n});\r\n\r\nexport default app;\r\n"}}
I1028 09:54:35.283617    3156 conn_opt.go:55] jsonrpc2: --> request #1: textDocument/codeAction: {"textDocument":{"uri":"file:///home/wavie3582/app.js"},"range":{"start":{"line":0,"character":0},"end":{"line":0,"character":0}},"context":{"diagnostics":[],"triggerKind":2}}
I1028 09:54:35.284362    3156 conn_opt.go:96] jsonrpc2: <-- result #1: textDocument/codeAction: null
I1028 09:54:35.301387    3156 conn_opt.go:55] jsonrpc2: --> request #2: textDocument/documentLink: {"textDocument":{"uri":"file:///home/wavie3582/app.js"}}
I1028 09:54:35.301507    3156 conn_opt.go:96] jsonrpc2: <-- result #2: textDocument/documentLink: null
I1028 09:54:36.011927    3156 conn_opt.go:55] jsonrpc2: --> request #3: textDocument/codeAction: {"textDocument":{"uri":"file:///home/wavie3582/app.js"},"range":{"start":{"line":0,"character":0},"end":{"line":0,"character":0}},"context":{"diagnostics":[],"triggerKind":2}}
I1028 09:54:36.012010    3156 conn_opt.go:55] jsonrpc2: --> request #4: textDocument/codeAction: {"textDocument":{"uri":"file:///home/wavie3582/app.js"},"range":{"start":{"line":0,"character":0},"end":{"line":0,"character":0}},"context":{"diagnostics":[],"triggerKind":2}}
I1028 09:54:36.012048    3156 conn_opt.go:55] jsonrpc2: --> request #5: textDocument/codeAction: {"textDocument":{"uri":"file:///home/wavie3582/app.js"},"range":{"start":{"line":0,"character":0},"end":{"line":0,"character":0}},"context":{"diagnostics":[],"triggerKind":2}}
I1028 09:54:36.012083    3156 conn_opt.go:55] jsonrpc2: --> request #6: textDocument/codeAction: {"textDocument":{"uri":"file:///home/wavie3582/app.js"},"range":{"start":{"line":0,"character":0},"end":{"line":0,"character":0}},"context":{"diagnostics":[],"triggerKind":2}}
I1028 09:54:36.012117    3156 conn_opt.go:55] jsonrpc2: --> request #7: textDocument/codeAction: {"textDocument":{"uri":"file:///home/wavie3582/app.js"},"range":{"start":{"line":0,"character":0},"end":{"line":0,"character":0}},"context":{"diagnostics":[],"triggerKind":2}}
I1028 09:54:36.012153    3156 conn_opt.go:55] jsonrpc2: --> request #8: textDocument/codeAction: {"textDocument":{"uri":"file:///home/wavie3582/app.js"},"range":{"start":{"line":0,"character":0},"end":{"line":0,"character":0}},"context":{"diagnostics":[],"triggerKind":2}}
I1028 09:54:36.012192    3156 conn_opt.go:55] jsonrpc2: --> request #9: textDocument/codeAction: {"textDocument":{"uri":"file:///home/wavie3582/app.js"},"range":{"start":{"line":0,"character":0},"end":{"line":0,"character":0}},"context":{"diagnostics":[],"triggerKind":2}}
I1028 09:54:36.012229    3156 conn_opt.go:55] jsonrpc2: --> request #10: textDocument/codeAction: {"textDocument":{"uri":"file:///home/wavie3582/app.js"},"range":{"start":{"line":0,"character":0},"end":{"line":0,"character":0}},"context":{"diagnostics":[],"triggerKind":2}}
I1028 09:54:36.012266    3156 conn_opt.go:55] jsonrpc2: --> request #11: textDocument/codeAction: {"textDocument":{"uri":"file:///home/wavie3582/app.js"},"range":{"start":{"line":0,"character":0},"end":{"line":0,"character":0}},"context":{"diagnostics":[],"triggerKind":2}}
I1028 09:54:36.012308    3156 conn_opt.go:55] jsonrpc2: --> request #12: textDocument/codeAction: {"textDocument":{"uri":"file:///home/wavie3582/app.js"},"range":{"start":{"line":0,"character":0},"end":{"line":0,"character":0}},"context":{"diagnostics":[],"triggerKind":2}}
I1028 09:54:36.012347    3156 conn_opt.go:55] jsonrpc2: --> request #13: textDocument/codeAction: {"textDocument":{"uri":"file:///home/wavie3582/app.js"},"range":{"start":{"line":0,"character":0},"end":{"line":0,"character":0}},"context":{"diagnostics":[],"triggerKind":2}}
I1028 09:54:36.012383    3156 conn_opt.go:55] jsonrpc2: --> request #14: textDocument/codeAction: {"textDocument":{"uri":"file:///home/wavie3582/app.js"},"range":{"start":{"line":0,"character":0},"end":{"line":0,"character":0}},"context":{"diagnostics":[],"triggerKind":2}}
I1028 09:54:36.012556    3156 conn_opt.go:96] jsonrpc2: <-- result #3: textDocument/codeAction: null
I1028 09:54:36.012680    3156 conn_opt.go:96] jsonrpc2: <-- result #4: textDocument/codeAction: null
I1028 09:54:36.012733    3156 conn_opt.go:96] jsonrpc2: <-- result #5: textDocument/codeAction: null
I1028 09:54:36.012786    3156 conn_opt.go:96] jsonrpc2: <-- result #6: textDocument/codeAction: null
I1028 09:54:36.012817    3156 conn_opt.go:96] jsonrpc2: <-- result #7: textDocument/codeAction: null
I1028 09:54:36.012857    3156 conn_opt.go:96] jsonrpc2: <-- result #8: textDocument/codeAction: null
I1028 09:54:36.012886    3156 conn_opt.go:96] jsonrpc2: <-- result #9: textDocument/codeAction: null
I1028 09:54:36.012916    3156 conn_opt.go:96] jsonrpc2: <-- result #10: textDocument/codeAction: null
I1028 09:54:36.012954    3156 conn_opt.go:96] jsonrpc2: <-- result #11: textDocument/codeAction: null
I1028 09:54:36.012982    3156 conn_opt.go:96] jsonrpc2: <-- result #12: textDocument/codeAction: null
I1028 09:54:36.013010    3156 conn_opt.go:96] jsonrpc2: <-- result #13: textDocument/codeAction: null
I1028 09:54:36.013040    3156 conn_opt.go:96] jsonrpc2: <-- result #14: textDocument/codeAction: null
I1028 09:54:36.021296    3156 conn_opt.go:53] jsonrpc2: --> notif: $/cancelRequest: {"id":3}
I1028 09:54:36.021350    3156 handler.go:184] cancel was requested for: 3, needs to be canceled: false
I1028 09:54:36.021362    3156 handler.go:188] cancel requested for 3 but not found
I1028 09:54:36.021389    3156 conn_opt.go:53] jsonrpc2: --> notif: $/cancelRequest: {"id":4}
I1028 09:54:36.021400    3156 handler.go:184] cancel was requested for: 4, needs to be canceled: false
I1028 09:54:36.021407    3156 handler.go:188] cancel requested for 4 but not found
I1028 09:54:36.021428    3156 conn_opt.go:53] jsonrpc2: --> notif: $/cancelRequest: {"id":5}
I1028 09:54:36.021438    3156 handler.go:184] cancel was requested for: 5, needs to be canceled: false
I1028 09:54:36.021444    3156 handler.go:188] cancel requested for 5 but not found
I1028 09:54:36.021465    3156 conn_opt.go:53] jsonrpc2: --> notif: $/cancelRequest: {"id":6}
I1028 09:54:36.021475    3156 handler.go:184] cancel was requested for: 6, needs to be canceled: false
I1028 09:54:36.021483    3156 handler.go:188] cancel requested for 6 but not found
I1028 09:54:36.021507    3156 conn_opt.go:53] jsonrpc2: --> notif: $/cancelRequest: {"id":7}
I1028 09:54:36.021517    3156 handler.go:184] cancel was requested for: 7, needs to be canceled: false
I1028 09:54:36.021524    3156 handler.go:188] cancel requested for 7 but not found
I1028 09:54:36.021545    3156 conn_opt.go:53] jsonrpc2: --> notif: $/cancelRequest: {"id":8}
I1028 09:54:36.021557    3156 handler.go:184] cancel was requested for: 8, needs to be canceled: false
I1028 09:54:36.021565    3156 handler.go:188] cancel requested for 8 but not found
I1028 09:54:36.021585    3156 conn_opt.go:53] jsonrpc2: --> notif: $/cancelRequest: {"id":9}
I1028 09:54:36.021595    3156 handler.go:184] cancel was requested for: 9, needs to be canceled: false
I1028 09:54:36.021602    3156 handler.go:188] cancel requested for 9 but not found
I1028 09:54:36.021624    3156 conn_opt.go:53] jsonrpc2: --> notif: $/cancelRequest: {"id":10}
I1028 09:54:36.021634    3156 handler.go:184] cancel was requested for: 10, needs to be canceled: false
I1028 09:54:36.021641    3156 handler.go:188] cancel requested for 10 but not found
I1028 09:54:36.021686    3156 conn_opt.go:53] jsonrpc2: --> notif: $/cancelRequest: {"id":11}
I1028 09:54:36.021715    3156 handler.go:184] cancel was requested for: 11, needs to be canceled: false
I1028 09:54:36.021727    3156 handler.go:188] cancel requested for 11 but not found
I1028 09:54:36.021753    3156 conn_opt.go:53] jsonrpc2: --> notif: $/cancelRequest: {"id":12}
I1028 09:54:36.021764    3156 handler.go:184] cancel was requested for: 12, needs to be canceled: false
I1028 09:54:36.021771    3156 handler.go:188] cancel requested for 12 but not found
I1028 09:54:36.021794    3156 conn_opt.go:53] jsonrpc2: --> notif: $/cancelRequest: {"id":13}
I1028 09:54:36.021804    3156 handler.go:184] cancel was requested for: 13, needs to be canceled: false
I1028 09:54:36.021812    3156 handler.go:188] cancel requested for 13 but not found
I1028 09:54:36.021849    3156 conn_opt.go:55] jsonrpc2: --> request #15: textDocument/documentLink: {"textDocument":{"uri":"file:///home/wavie3582/app.js"}}
I1028 09:54:36.021980    3156 conn_opt.go:96] jsonrpc2: <-- result #15: textDocument/documentLink: null
I1028 09:54:36.503863    3156 conn_opt.go:55] jsonrpc2: --> request #16: textDocument/hover: {"textDocument":{"uri":"file:///home/wavie3582/app.js"},"position":{"line":4,"character":7}}
I1028 09:54:36.504097    3156 conn_opt.go:96] jsonrpc2: <-- result #16: textDocument/hover: null
I1028 09:54:40.107843    3156 conn_opt.go:55] jsonrpc2: --> request #17: textDocument/codeAction: {"textDocument":{"uri":"file:///home/wavie3582/app.js"},"range":{"start":{"line":0,"character":0},"end":{"line":0,"character":0}},"context":{"diagnostics":[],"triggerKind":2}}
I1028 09:54:40.108190    3156 conn_opt.go:96] jsonrpc2: <-- result #17: textDocument/codeAction: null
I1028 09:54:45.760051    3156 conn_opt.go:55] jsonrpc2: --> request #18: textDocument/codeAction: {"textDocument":{"uri":"file:///home/wavie3582/app.js"},"range":{"start":{"line":0,"character":0},"end":{"line":0,"character":0}},"context":{"diagnostics":[],"triggerKind":2}}
I1028 09:54:45.760177    3156 conn_opt.go:96] jsonrpc2: <-- result #18: textDocument/codeAction: null
I1028 09:57:59.140244    3156 conn_opt.go:55] jsonrpc2: --> request #19: textDocument/hover: {"textDocument":{"uri":"file:///home/wavie3582/app.js"},"position":{"line":15,"character":42}}
I1028 09:57:59.140490    3156 conn_opt.go:96] jsonrpc2: <-- result #19: textDocument/hover: null
